# 这是用来记录项目的文档

- 现有的内容

    1. 采用对抗训练的视觉特征生成网络已经有了，但训练方式对不上
    2. 数据读取的代码已有，但还没有理解顺
    3. 有提取好的视觉特征数据

- 总体计划
    1. 确定整个模型分为几个部分来实现，以及各部分之间的关系
    2. 各部分网络的细节和具体结构，涉及到的问题
    3. 确定训练方式，各个部分的网络分别采用什么策略进行训练，分步骤说明
    4. 损失衡量
    5. 数据的来源和形式
    6. 随时记录想起的问题

## WEEK8

### Week8 Day3 2-27

整个模型分为三部分：视觉特征提取模块、基于语义特征的视觉特征生成模块、视觉特征反响生成语义特征模块。真的需要自己实现的只有视觉特征生成网络和语义特征生成网络

- 视觉特征生成网络包括：

- 语义特征生成网络包括：

### Week8 Day4 2-28

- 基于语义特征的视觉生成网络：（唯一与fxGAN不同的地方是训练方式，需要根据训练策略改变网络的架构）
    1. 噪声(正太分布、维度与fxGAN相同)+属性(与选取的视觉特征对应)作为网络的输入
    2. 网络结构采用同fxGAN相同的网络结构

### Week8 Day5 3-1

方案变化：**根据讨论，先进行简单的网络添加看效果。**

- 添加视觉特征生成回语义特征的网络
    1. 网络结构采用和对抗网路的Generator相同的结构
    2. 损失采用原始属性和生成属性之间的cos距离，将这一项添加到原来的总损失项上
    3. 训练方式采用跟随生成对抗网络的方式：在取每一个batch训练完后，直接用训练得到的Generator来生成视觉特征，然后用这些视觉特征经过R网络得到属性向量

- 直接跑实验得出一个对比效果

代码中的一个问题是：Discriminator的输入数据包括视觉特征和标签，而*标签采用的是属性向量*

### Week8 Day6 3-2

和老师交流内容：

1. 首先记录原先模型的效果
2. 加入视觉特征到属性特征的生成网络，跑出结果
3. 将判别网络的标签修改为普通的0、1作为标签
4. 将判别网络的标签修改为类别标签
5. 对上面两种标签种都进行反向生成
6. 对比有无属性生成网络的结果，对比三种不同判别器标签的结果

接下来这周先实现第4点，真的弄清晰整个代码

### Week8 Day7 3-3

原始的fxGAN的结果没跑出来，猜测问题出在最后的生成视觉特征然后进行分类的部分。

## WEEK9

### Week9 Day1 3-4

没时间弄

### Week9 Day2 3-5

查看了代码，但是由于没有空闲服务器资源，没有找到原因
查找到用生成的视觉特征训练分类器哪里，接下来是看val()函数是不是有问题

### Week9 Day3 3-6

再次通读整个网络，但没有服务器资源，没能找到问题在哪里

### Week9 Day4 3-7

智障一般的低级错误，在跑代码前**环境**都没有注意就开始跑

### Week9 Day5 3-8

加入简单的R网络，成功跑出了同参考论文水平的结果，相比自己用不加R网络的原始代码跑的结果好一些？

现有的想法：

1. 首先要确认加入属性生成网络后，确实能提升性能。
2. 更改网络结构，对比实验结果：
    - R网络结构更改的实验结果对比
3. 原始模型中分类网络是否存在对模型的影响
4. 生成对抗部分里判别器的标签更改，以及选择不同标签的原因

接下来一周时间的工作：

1. 先针对现有的模型进行准确率的对比
    - 将原始代码调试，跑出论文中陈述的结果
    - 跑加入R网络的模型的结果，并与不加R网络的结果对比，确认循环生成这条路可以走
2. 更改R网络的结构
3. 去掉分类网络保留R网络，将实验结果与原始网络对比
4. 更改判别器的标签

### Week9 Day6 3-9

## Week10

### Week10 Day1 3-11

跑完原始结果和加入R网络后的结果

### Week10 Day2 3-12

配置git仓库，将项目进行管理，以便在之后对比不同版本的网络结构

梳理下接下来几天的工作：（针对简单的R网络的实验）

R网络的作用是：基本的想法是希望，训练的生成器可以生成视觉特征了，通过将生成的视觉特征再生成回语义特征（属性）来实现类似于clsgan中的cls的作用，以强化G生成的特征确实生成了与原始属性相关的内容。

1. R网络的具体结构（用什么类型的网络/借鉴，参数的设置依据）
2. R网络如何训练（在代码那个地方进行训练，训练的数据哪里来，是否进行预训练，用什么损失，损失具体加到哪里，训练完怎么用来生成）

### Week10 Day3 3-13

R网络存在的目的是实现从生成的视觉特征再生成回属性的过程，最终是为G网络具有更好的生成能力服务的，所以R网络的更改应该以提升G网络为方向。

### Week10 Day4 3-14

### Week10 Friday 3-15

组会：

1. R网络预训练
2. 去掉分类的网络可以尝试，但目测效果不好
3. 将用于R网络输入的视觉特征经过一个判别，好的视觉特征才哪来去生成

接下来一周的工作：

1. 给R网络损失加上一个超参数实验，在CUB数据集上跑
2. 修改R网络的隐藏层数目看结果
3. 先进行R网络预训练看效果（预训练用数据，在整体网络之前进行预训练，修改损失函数以及损失函数加的位置）
4. 实现对R网络生成的视觉特征的筛选使用